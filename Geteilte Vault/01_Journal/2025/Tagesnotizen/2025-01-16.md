---
created: 2025-01-13T13:07
updated: 2025-01-17T09:08
---
â—€ [[2025-01-15]] - [[2025-01-17]] â–¶

Verantwortlicher: Cornelius ðŸŽ‰
## Vormittag
#### Ablauf ðŸ§­
* `nmap` scans
* SSH Password Brute-Force with `hydra`

* 2.1.14 - Einleitung Systemsicherheit
* 2.1.18 u.f. - SystemhÃ¤rtung
###### â›© Bingoliste/ErgÃ¤nzungen ðŸ¾
###### Zusammenfassung ðŸŒ²

## Nachmittag
###### AufgabenðŸ“š
Wiederholt bitte auch die theoretischen Themen von heute und Ã¼berlegt euch idealerweise ein oder zwei Vokabelkarten.
###### `nmap`
* Ich hab drei zufÃ¤llige Ports auf Euren Maschinen geÃ¶ffnet. Welche sind das?
###### `hydra`
* FÃ¼hrt eine erfolgreiche Passwort-Brute-Force Attacke mit dem Kali Tool `hydra` durch (`hydra -h`). Erstellt dazu eine kleine Passwortliste, welche das korrekte Passwort enthÃ¤lt und wertet das ganze in der WeboberflÃ¤che des Wazuh Servers aus.
* Provoziert mit `hydra` einen Account Lockout beim Windows Agent (mehr als 10 falsche Passworteingaben fÃ¼r einen Benutzeraccount)
* Untersucht wie der Kali Agent eine Passwort-Brute-Force Attacke handhabt. Wie viele PasswÃ¶rter kÃ¶nnt ihr pro Sekunde ausprobieren und wie lange wÃ¼rde es dauern die komplette WÃ¶rterliste `/usr/share/wordlists/rockyou.txt` auszuprobieren.
  
  # **Conny's Zusammenfassung 16.01.25 Vormittag**

- Erstellung von Ordner [NMAP]
- [Host-Discovery]
- [Ports-Ã¶ffnen]
- [Spezifische-Ports]
- [Standard-Scan]


### ![nmap] Wiederholung
##### [Host-Discovery]

`sn:` Ping Scan - disable port scan (ICMP Paket)
`nmap -Pn -p 22 open 192.168.22.0/24` Sendet Ping an alle GerÃ¤te (auch offline Ports)`PS/PA/PU/PY[portlist]:` TCP SYN/ACK, UDP oder SCTP discovery to given ports
`nmap` des eigenen NW an -> 127.0.0.1
`nmap 127.0.0.1 --top-ports 100`  scannt die 100 TOP Ports

*==1/65== aller Ports werden gescannt, da 65000 exist.*


### Scan Techniken mit ==nmap==

- `-sS/` unauffÃ¤llig & schnell, da nur `SYN` gesendet & nach `ACK` Empfang die Verbindung abgebrochen wird  
- `sT/` beendet TCP Handshake regulÃ¤r

-> Ergebnis ist identisch aber Pakete und damit die Spuren sind anders


---

### FoliensÃ¤tze

##### Definition Systemsicherheit
->  Kontrollen und SicherheitsmaÃŸnahmen, die eine Organisation ergreift, um ihre Netzwerke und Ressourcen vor Ausfallzeiten, StÃ¶rungen oder bÃ¶swilligen Eingriffen zu schÃ¼tzen. 
*Wenn es bei der Datensicherheit darum geht, die Informationen in den BÃ¼chern der Bibliothek zu schÃ¼tzen, dann ist die Systemsicherheit das, was die Bibliothek selbst schÃ¼tzt.*


##### Bedeutung der Systemsicherheit
* Schutz sensibler Daten vor Cyberangriffen und Datenlecks
* Vermeidung finanzieller Verluste durch Sicherheitsverletzungen
* GewÃ¤hrleistung von Datenschutz und Compliance mit gesetzlichen Anforderungen
ErgÃ¤nzung: NIS2 europaweite Anforderungen fÃ¼r KRITIS

==KRITIS== = Sektoren & Systeme; fÃ¼r das Gemeinwesen essenziell, wie 
Energie, Wasser, Gesundheit, Informationstechnik, Telekommunikation, Transport, Finanzwesen und ErnÃ¤hrung.

###### **LINKS zu KRITIS**
https://www.openkritis.de/it-sicherheitsgesetz/kritis-sektoren.html](https://www.openkritis.de/it-sicherheitsgesetz/kritis-sektoren.html)
[https://www.bsi.bund.de/DE/Themen/Regulierte-Wirtschaft/Kritische-Infrastrukturen/Allgemeine-Infos-zu-KRITIS/allgemeine-infos-zu-kritis_node.html](https://www.bsi.bund.de/DE/Themen/Regulierte-Wirtschaft/Kritische-Infrastrukturen/Allgemeine-Infos-zu-KRITIS/allgemeine-infos-zu-kritis_node.html)

##### Grundprinzipien der Systemsicherheit

**AuthentizitÃ¤t** Verifizierung der IdentitÃ¤t von Benutzern, Systemen oder Nachrichten, um die GlaubwÃ¼rdigkeit der Quelle zu bestÃ¤tigen. Beispiele umfassen digitale Signaturen und Zertifikate.
**Rechenschaftspflicht**
Sicherstellung, dass alle Aktionen innerhalb des Systems nachverfolgbar sind und somit Verantwortlichkeit geschaffen wird. Dies wird oft durch umfangreiche Audit-Logs und Monitoring-Tools erreicht. 
**Nicht-Abstreitbarkeit**
Implementierung von Mechanismen, die es einem Benutzer oder System unmÃ¶glich machen, die DurchfÃ¼hrung einer Aktion abzustreiten. Dies ist besonders wichtig in rechtlichen Auseinandersetzungen und wird durch
Technologien wie Blockchain und digitale Signaturen (bspw. E-Mail) unterstÃ¼tzt.

---

##### SystemhÃ¤rtung
*Unter HÃ¤rten (englisch Hardening) versteht man in der Computertechnik, die Sicherheit eines Systems zu erhÃ¶hen, indem nur dedizierte Software eingesetzt wird, die fÃ¼r den Betrieb des Systems notwendig ist und deren unter Sicherheitsaspekten korrekter Ablauf garantiert werden kann. Das System soll dadurch besser vor Angriffen geschÃ¼tzt sein.*

**Reduzierung der potenziellen AngriffsflÃ¤che**stÃ¤rkt dessen Abwehr gegen verschiedene Bedrohungen wie Malware, unbefugten Zugriff und Datenschutzverletzungem.
##### Geringere Exploitation
Das HÃ¤rten eines Systems zielt darauf ab, **hÃ¤ufige Schwachstellen und SchwÃ¤chen in Software, Betriebssystemen und Netzwerkkonfigurationen zu eliminieren oder zu mildern**. Dadurch wird die Wahrscheinlichkeit einer erfolgreichen Ausnutzung durch bÃ¶sartige Akteure, einschlieÃŸlich Hacker und Malware, verringert.

##### Einhaltung von Sicherheitsstandards
Viele Branchen und Organisationen haben spezifische Sicherheitsstandards und -vorschriften, die befolgt werden mÃ¼ssen, um sensible Daten zu schÃ¼tzen. **Das HÃ¤rten von Systemen hilft, diese Anforderungen zu erfÃ¼llen und die Einhaltung branchenspezifischer Standards**, wie dem Payment Card Industry Data Security Standard (PCI DSS) oder dem Health Insurance Portability and Accountability Act (HIPAA), **zu gewÃ¤hrleisten**.

##### GeschÃ¤ftskontinuitÃ¤t / BCM - Business Continuity Management
HÃ¤rtung verbessert WiderstandsfÃ¤higkeit der Infrastruktur. **Dies verringert die Wahrscheinlichkeit von Systemunterbrechungen**, Austallzeiten und finanziellen Verlusten, die durch erfolgreiche Angriffe entstehen. Es ermÃ¶glicht Ihrem Unternehmen, die **KontinuitÃ¤t aufrechtzuerhalten**, **ununterbrochene Dienste** bereitzustellen und seinen Ruf zu schÃ¼tzen.

##### Verteidigung in der Tiefe / Defense-in-Depth
Das HÃ¤rten von Systemen trÃ¤gt zu einer Verteidigungsstrategie in der Tiefe bei, bei der **mehrere Schichten von SicherheitsmaÃŸnahmen** implementiert werden. Durch den Einsatz verschiedener Sicherheitskontrollen, wie starken Zugangskontrollen, VerschlÃ¼sselung, Firewalls, Intrusion Detection Systemen und regelmÃ¤ÃŸigen Sicherheitsaudits, erstellen Sie **mehrere Barrieren,** die es Angreifern erschweren, Ihr System zu kompromittieren.

Mehrere Lagen & Methoden zu HÃ¤rtung, wie Firewalls, etc.![[SystemhÃ¤rtung_Beispielbild.png]]

-> **Proaktive Sicherheitshaltung**

Das HÃ¤rten von Systemen ist ein proaktiver Ansatz zur Sicherheit. Es beinhaltet regelmÃ¤ÃŸige Bewertungen und Updates, um aufkommende Bedrohungen und Schwachstellen anzusprechen. Durch kontinuierliches Ãœberwachen und Verbessern der Sicherheit Ihrer Systeme kÃ¶nnen Sie **potenziellen Angreifern einen Schritt voraus sein** und das Risiko erfolgreicher Angriffe reduzieren.

##### Betriebssystemhartung
Dies beinhaltet die Sicherung des Betriebssystems durch dessen Konfiguration **zur Minimierung von Schwachstellen**. Es **umfasst MaÃŸnahmen** wie 
- **das Deaktivieren unnÃ¶tiger Dienste & SchlieÃŸen ungenutzter Ports,** 
- Aktivieren von Sicherheitsfunktionen wie Firewalls und Intrusion Detection Systemen,
- Durchsetzen starker Passwortrichtlinien und 
- **regelmÃ¤ÃŸiges Anwenden von Sicherheitspatches und Updates**.

##### Anwendungshartung
Die AnwendungshÃ¤rtung konzentriert sich auf die Sicherung **einzelner Softwareanwendungen**, die auf dem System laufen. Sie beinhaltet MaÃŸnahmen wie das 
- Entfernen oder Deaktivieren unnÃ¶tiger Funktionen und FunktionalitÃ¤ten, 
- Anwenden anwendungsspezifischer Sicherheitspatches und Updates,
- Verwenden sicherer Programmierpraktiken und Aktivieren von anwendungsebenen Zugangskontrollen und Authentifizierungsmechanismen.

-> Deaktivierung von Funktionen die nicht benÃ¶tigt werden. 
-> alles aktuell halten
-> sichere Programmierpraktiken 

##### NetzwerkhÃ¤rtung 
Die NetzwerkhÃ¤rtung zielt darauf ab, die Netzwerkinfrastruktur und KommunikationskanÃ¤le zu sichern. Sie beinhaltet MaÃŸnahmen wie 
- das Konfigurieren von Firewalls, 
- Implementieren von Intrusion Prevention Systemen (IPS) und 
- Intrusion Detection Systemen (IDS),  
- Aktivieren von VerschlÃ¼sselungsprotokollen wie SSL/TLS, sowie 
- das Segmentieren des Netzwerks zur Reduzierung der Auswirkungen eines Bruchs und Implementieren von 
Netzwerkzugangskontrollen.
Potentielle MaÃŸnahme: DMZ
##### BenutzerkontenhÃ¤rtung
Blick auf Sicherung von Benutzerkonten & deren Berechtigungen sowie verdÃ¤chtiges Verhalten
- PW Richtlinien,
- 2FA / MFA
- ==Principle of least privilege== 

##### Patch Management
Das Ãœberwachen & Installieren von SoftwareUpdates, OS Updates, etc. 
Hilft bekannte Schwachstellen anzugehen & System vor Ausnutzung zu schÃ¼tzen

##### SystemÃ¼berwachung und -Protokollierung / SIEM
Die Implementierung robuster Ãœberwachungs- und Protokollierungsmechanismen ist wesentlich fÃ¼r die SystemhÃ¤rtung. Sie beinhaltet das Einrichten von Sicherheitsereignisprotokollierung, 
- Ãœberwachen von Systemprotokollen auf verdÃ¤chtige AktivitÃ¤ten, 
- Implementieren von Intrusion Detection Systemen und 
- DurchfÃ¼hren regelmÃ¤ÃŸiger Sicherheitsaudits und ÃœberprÃ¼fungen, um potenzielle Bedrohungen rechtzeitig zu identifizieren und darauf zu reagieren.

##### Sicheres Konfigurationsmanagement
Sicheres Konfigurationsmanagement beinhaltet das **Festlegen und Aufrechterhalten sicherer Konfigurationen fÃ¼r verschiedene Systemkomponenten**, wie Hardware, Betriebssysteme und Softwareanwendungen. 
Es umfasst MaÃŸnahmen wie 
- das Deaktivieren unnÃ¶tiger Dienste und Protokolle, 
- Konfigurieren von Zugangskontrollen, 
- Aktivieren von VerschlÃ¼sselung und Implementieren sicherer Kommunikationsprotokolle.

**Beispiele** 
-> ==Switches alle gleich eingerichtet== 
-> CC Laptops gleiche Einrichtung 

---
### HYDRA 
-> ==a very fast network logon cracker which supports many different services==

Beispiel:`hydra -l user -P passlist.txt ftp://192.168.0.1`
Beispiel Erstellung einer .txt Liste mit gÃ¤ngigen PasswÃ¶rtern 

![[hydra_Beispiel_01.png]]

Kali@Kali `vim login. txt` LieÃŸt txt Datei ein
Kali@Kali `hydra -L login.txt -P pass.txt ssh://192.168.22.102|` 
`-L login.txt` Gibt Datei mit Benutzernamen an
`-P pass.txt` Gibt Datei mit Liste v PW an


![[hydra_Beispiel_02.png]]

**Ablauf Hydra Beispiel** 
- Hydra testet zuerst Benutzer 1 mit Passwort 01 aus der File
- Dann das nÃ¤chste PW bis z Letzten
- AnschlieÃŸend Benutzer 2 mit PW1, 2, 3, etc.


- Anmeldeversuche via Hydra sind in WAZUH sichtbar, ebenso die korrekte / letzte Anmeldung
- Nach 5 Versuchen folgte (in diesem Bsp.!) Account Sperrung

#### OTHER
* [ ] SSH Keys kÃ¶nnen mit der Passphrase *verschlÃ¼sselt* werden
* [ ] Programme ohne die direkt ausgefÃ¼hrt, ohne OS -> Baremetal
* [ ] Wenn Ports nach auÃŸen geschlossen, kann Angreifer nicht "herein",  -> [Netzwerksicherheit]
* [ ] Security by Design (Bei Software Erstellung bereits vorbeugen)



  

---
```dataview
TABLE file.ctime AS "Created", file.mtime AS "Updated", file.size AS "Size" 
WHERE file.cday = date(this.file.name) OR file.mday = date(this.file.name) 
```
