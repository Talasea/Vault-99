---
created: 2025-01-13T13:07
updated: 2025-01-17T09:08
---
◀ [[2025-01-15]] - [[2025-01-17]] ▶

Verantwortlicher: Cornelius 🎉
## Vormittag
#### Ablauf 🧭
* `nmap` scans
* SSH Password Brute-Force with `hydra`

* 2.1.14 - Einleitung Systemsicherheit
* 2.1.18 u.f. - Systemhärtung
###### ⛩ Bingoliste/Ergänzungen 🐾
###### Zusammenfassung 🌲

## Nachmittag
###### Aufgaben📚
Wiederholt bitte auch die theoretischen Themen von heute und überlegt euch idealerweise ein oder zwei Vokabelkarten.
###### `nmap`
* Ich hab drei zufällige Ports auf Euren Maschinen geöffnet. Welche sind das?
###### `hydra`
* Führt eine erfolgreiche Passwort-Brute-Force Attacke mit dem Kali Tool `hydra` durch (`hydra -h`). Erstellt dazu eine kleine Passwortliste, welche das korrekte Passwort enthält und wertet das ganze in der Weboberfläche des Wazuh Servers aus.
* Provoziert mit `hydra` einen Account Lockout beim Windows Agent (mehr als 10 falsche Passworteingaben für einen Benutzeraccount)
* Untersucht wie der Kali Agent eine Passwort-Brute-Force Attacke handhabt. Wie viele Passwörter könnt ihr pro Sekunde ausprobieren und wie lange würde es dauern die komplette Wörterliste `/usr/share/wordlists/rockyou.txt` auszuprobieren.
  
  # **Conny's Zusammenfassung 16.01.25 Vormittag**

- Erstellung von Ordner [NMAP]
- [Host-Discovery]
- [Ports-öffnen]
- [Spezifische-Ports]
- [Standard-Scan]


### ![nmap] Wiederholung
##### [Host-Discovery]

`sn:` Ping Scan - disable port scan (ICMP Paket)
`nmap -Pn -p 22 open 192.168.22.0/24` Sendet Ping an alle Geräte (auch offline Ports)`PS/PA/PU/PY[portlist]:` TCP SYN/ACK, UDP oder SCTP discovery to given ports
`nmap` des eigenen NW an -> 127.0.0.1
`nmap 127.0.0.1 --top-ports 100`  scannt die 100 TOP Ports

*==1/65== aller Ports werden gescannt, da 65000 exist.*


### Scan Techniken mit ==nmap==

- `-sS/` unauffällig & schnell, da nur `SYN` gesendet & nach `ACK` Empfang die Verbindung abgebrochen wird  
- `sT/` beendet TCP Handshake regulär

-> Ergebnis ist identisch aber Pakete und damit die Spuren sind anders


---

### Foliensätze

##### Definition Systemsicherheit
->  Kontrollen und Sicherheitsmaßnahmen, die eine Organisation ergreift, um ihre Netzwerke und Ressourcen vor Ausfallzeiten, Störungen oder böswilligen Eingriffen zu schützen. 
*Wenn es bei der Datensicherheit darum geht, die Informationen in den Büchern der Bibliothek zu schützen, dann ist die Systemsicherheit das, was die Bibliothek selbst schützt.*


##### Bedeutung der Systemsicherheit
* Schutz sensibler Daten vor Cyberangriffen und Datenlecks
* Vermeidung finanzieller Verluste durch Sicherheitsverletzungen
* Gewährleistung von Datenschutz und Compliance mit gesetzlichen Anforderungen
Ergänzung: NIS2 europaweite Anforderungen für KRITIS

==KRITIS== = Sektoren & Systeme; für das Gemeinwesen essenziell, wie 
Energie, Wasser, Gesundheit, Informationstechnik, Telekommunikation, Transport, Finanzwesen und Ernährung.

###### **LINKS zu KRITIS**
https://www.openkritis.de/it-sicherheitsgesetz/kritis-sektoren.html](https://www.openkritis.de/it-sicherheitsgesetz/kritis-sektoren.html)
[https://www.bsi.bund.de/DE/Themen/Regulierte-Wirtschaft/Kritische-Infrastrukturen/Allgemeine-Infos-zu-KRITIS/allgemeine-infos-zu-kritis_node.html](https://www.bsi.bund.de/DE/Themen/Regulierte-Wirtschaft/Kritische-Infrastrukturen/Allgemeine-Infos-zu-KRITIS/allgemeine-infos-zu-kritis_node.html)

##### Grundprinzipien der Systemsicherheit

**Authentizität** Verifizierung der Identität von Benutzern, Systemen oder Nachrichten, um die Glaubwürdigkeit der Quelle zu bestätigen. Beispiele umfassen digitale Signaturen und Zertifikate.
**Rechenschaftspflicht**
Sicherstellung, dass alle Aktionen innerhalb des Systems nachverfolgbar sind und somit Verantwortlichkeit geschaffen wird. Dies wird oft durch umfangreiche Audit-Logs und Monitoring-Tools erreicht. 
**Nicht-Abstreitbarkeit**
Implementierung von Mechanismen, die es einem Benutzer oder System unmöglich machen, die Durchführung einer Aktion abzustreiten. Dies ist besonders wichtig in rechtlichen Auseinandersetzungen und wird durch
Technologien wie Blockchain und digitale Signaturen (bspw. E-Mail) unterstützt.

---

##### Systemhärtung
*Unter Härten (englisch Hardening) versteht man in der Computertechnik, die Sicherheit eines Systems zu erhöhen, indem nur dedizierte Software eingesetzt wird, die für den Betrieb des Systems notwendig ist und deren unter Sicherheitsaspekten korrekter Ablauf garantiert werden kann. Das System soll dadurch besser vor Angriffen geschützt sein.*

**Reduzierung der potenziellen Angriffsfläche**stärkt dessen Abwehr gegen verschiedene Bedrohungen wie Malware, unbefugten Zugriff und Datenschutzverletzungem.
##### Geringere Exploitation
Das Härten eines Systems zielt darauf ab, **häufige Schwachstellen und Schwächen in Software, Betriebssystemen und Netzwerkkonfigurationen zu eliminieren oder zu mildern**. Dadurch wird die Wahrscheinlichkeit einer erfolgreichen Ausnutzung durch bösartige Akteure, einschließlich Hacker und Malware, verringert.

##### Einhaltung von Sicherheitsstandards
Viele Branchen und Organisationen haben spezifische Sicherheitsstandards und -vorschriften, die befolgt werden müssen, um sensible Daten zu schützen. **Das Härten von Systemen hilft, diese Anforderungen zu erfüllen und die Einhaltung branchenspezifischer Standards**, wie dem Payment Card Industry Data Security Standard (PCI DSS) oder dem Health Insurance Portability and Accountability Act (HIPAA), **zu gewährleisten**.

##### Geschäftskontinuität / BCM - Business Continuity Management
Härtung verbessert Widerstandsfähigkeit der Infrastruktur. **Dies verringert die Wahrscheinlichkeit von Systemunterbrechungen**, Austallzeiten und finanziellen Verlusten, die durch erfolgreiche Angriffe entstehen. Es ermöglicht Ihrem Unternehmen, die **Kontinuität aufrechtzuerhalten**, **ununterbrochene Dienste** bereitzustellen und seinen Ruf zu schützen.

##### Verteidigung in der Tiefe / Defense-in-Depth
Das Härten von Systemen trägt zu einer Verteidigungsstrategie in der Tiefe bei, bei der **mehrere Schichten von Sicherheitsmaßnahmen** implementiert werden. Durch den Einsatz verschiedener Sicherheitskontrollen, wie starken Zugangskontrollen, Verschlüsselung, Firewalls, Intrusion Detection Systemen und regelmäßigen Sicherheitsaudits, erstellen Sie **mehrere Barrieren,** die es Angreifern erschweren, Ihr System zu kompromittieren.

Mehrere Lagen & Methoden zu Härtung, wie Firewalls, etc.![[Systemhärtung_Beispielbild.png]]

-> **Proaktive Sicherheitshaltung**

Das Härten von Systemen ist ein proaktiver Ansatz zur Sicherheit. Es beinhaltet regelmäßige Bewertungen und Updates, um aufkommende Bedrohungen und Schwachstellen anzusprechen. Durch kontinuierliches Überwachen und Verbessern der Sicherheit Ihrer Systeme können Sie **potenziellen Angreifern einen Schritt voraus sein** und das Risiko erfolgreicher Angriffe reduzieren.

##### Betriebssystemhartung
Dies beinhaltet die Sicherung des Betriebssystems durch dessen Konfiguration **zur Minimierung von Schwachstellen**. Es **umfasst Maßnahmen** wie 
- **das Deaktivieren unnötiger Dienste & Schließen ungenutzter Ports,** 
- Aktivieren von Sicherheitsfunktionen wie Firewalls und Intrusion Detection Systemen,
- Durchsetzen starker Passwortrichtlinien und 
- **regelmäßiges Anwenden von Sicherheitspatches und Updates**.

##### Anwendungshartung
Die Anwendungshärtung konzentriert sich auf die Sicherung **einzelner Softwareanwendungen**, die auf dem System laufen. Sie beinhaltet Maßnahmen wie das 
- Entfernen oder Deaktivieren unnötiger Funktionen und Funktionalitäten, 
- Anwenden anwendungsspezifischer Sicherheitspatches und Updates,
- Verwenden sicherer Programmierpraktiken und Aktivieren von anwendungsebenen Zugangskontrollen und Authentifizierungsmechanismen.

-> Deaktivierung von Funktionen die nicht benötigt werden. 
-> alles aktuell halten
-> sichere Programmierpraktiken 

##### Netzwerkhärtung 
Die Netzwerkhärtung zielt darauf ab, die Netzwerkinfrastruktur und Kommunikationskanäle zu sichern. Sie beinhaltet Maßnahmen wie 
- das Konfigurieren von Firewalls, 
- Implementieren von Intrusion Prevention Systemen (IPS) und 
- Intrusion Detection Systemen (IDS),  
- Aktivieren von Verschlüsselungsprotokollen wie SSL/TLS, sowie 
- das Segmentieren des Netzwerks zur Reduzierung der Auswirkungen eines Bruchs und Implementieren von 
Netzwerkzugangskontrollen.
Potentielle Maßnahme: DMZ
##### Benutzerkontenhärtung
Blick auf Sicherung von Benutzerkonten & deren Berechtigungen sowie verdächtiges Verhalten
- PW Richtlinien,
- 2FA / MFA
- ==Principle of least privilege== 

##### Patch Management
Das Überwachen & Installieren von SoftwareUpdates, OS Updates, etc. 
Hilft bekannte Schwachstellen anzugehen & System vor Ausnutzung zu schützen

##### Systemüberwachung und -Protokollierung / SIEM
Die Implementierung robuster Überwachungs- und Protokollierungsmechanismen ist wesentlich für die Systemhärtung. Sie beinhaltet das Einrichten von Sicherheitsereignisprotokollierung, 
- Überwachen von Systemprotokollen auf verdächtige Aktivitäten, 
- Implementieren von Intrusion Detection Systemen und 
- Durchführen regelmäßiger Sicherheitsaudits und Überprüfungen, um potenzielle Bedrohungen rechtzeitig zu identifizieren und darauf zu reagieren.

##### Sicheres Konfigurationsmanagement
Sicheres Konfigurationsmanagement beinhaltet das **Festlegen und Aufrechterhalten sicherer Konfigurationen für verschiedene Systemkomponenten**, wie Hardware, Betriebssysteme und Softwareanwendungen. 
Es umfasst Maßnahmen wie 
- das Deaktivieren unnötiger Dienste und Protokolle, 
- Konfigurieren von Zugangskontrollen, 
- Aktivieren von Verschlüsselung und Implementieren sicherer Kommunikationsprotokolle.

**Beispiele** 
-> ==Switches alle gleich eingerichtet== 
-> CC Laptops gleiche Einrichtung 

---
### HYDRA 
-> ==a very fast network logon cracker which supports many different services==

Beispiel:`hydra -l user -P passlist.txt ftp://192.168.0.1`
Beispiel Erstellung einer .txt Liste mit gängigen Passwörtern 

![[hydra_Beispiel_01.png]]

Kali@Kali `vim login. txt` Ließt txt Datei ein
Kali@Kali `hydra -L login.txt -P pass.txt ssh://192.168.22.102|` 
`-L login.txt` Gibt Datei mit Benutzernamen an
`-P pass.txt` Gibt Datei mit Liste v PW an


![[hydra_Beispiel_02.png]]

**Ablauf Hydra Beispiel** 
- Hydra testet zuerst Benutzer 1 mit Passwort 01 aus der File
- Dann das nächste PW bis z Letzten
- Anschließend Benutzer 2 mit PW1, 2, 3, etc.


- Anmeldeversuche via Hydra sind in WAZUH sichtbar, ebenso die korrekte / letzte Anmeldung
- Nach 5 Versuchen folgte (in diesem Bsp.!) Account Sperrung

#### OTHER
* [ ] SSH Keys können mit der Passphrase *verschlüsselt* werden
* [ ] Programme ohne die direkt ausgeführt, ohne OS -> Baremetal
* [ ] Wenn Ports nach außen geschlossen, kann Angreifer nicht "herein",  -> [Netzwerksicherheit]
* [ ] Security by Design (Bei Software Erstellung bereits vorbeugen)



  

---
```dataview
TABLE file.ctime AS "Created", file.mtime AS "Updated", file.size AS "Size" 
WHERE file.cday = date(this.file.name) OR file.mday = date(this.file.name) 
```
